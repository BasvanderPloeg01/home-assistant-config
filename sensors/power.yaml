#
# AcuRite battery monitoring
#
- platform: mqtt
  name: Bedroom AcuRite Battery
  state_topic: "home/bedroom/bedroom"
  unit_of_measurement: '%'
  value_template: >-
    {% set battery_level = value_json.battery | default(0) | int %}

    {% if battery_level %}
      100
    {% else %}
      10
    {% endif %}

- platform: template
  sensors:
    bedroom_multisensor_battery:
      friendly_name: Bedroom Multisensor Battery
      unit_of_measurement: '%'
      value_template: >-
        {% set battery_level = states('sensor.bedroom_acurite_battery') | default(0) | int %}

        {{ battery_level }}
      icon_template: >-
        {% set battery_level = states('sensor.bedroom_acurite_battery') | default(0) | int %}

        {% if battery_level > 10 %}
          mdi:battery
        {% elif battery_round == 10 %}
          mdi:battery-10
        {% else %}
          mdi:battery-outline
        {% endif %}


#
# Aeotec battery monitoring
#
- platform: template
  sensors:
    front_door_sensor_battery:
      friendly_name: Front Door Sensor Battery
      unit_of_measurement: '%'
      value_template: >-
        {% set battery_level = states.zwave.aeotec_zw120_door_window_sensor_gen5.attributes.battery_level | default(0) | int %}

        {% if battery_level %}
          {{ battery_level | round }}
        {% else %}
          {{ states('zwave.aeotec_zw120_door_window_sensor_gen5') }}
        {%- endif %}
      icon_template: >-
        {% set battery_level = states.zwave.aeotec_zw120_door_window_sensor_gen5.attributes.battery_level | default(0) | int %}
        {% set battery_round = (battery_level / 10) | int * 10 %}

        {% if battery_round >= 100 %}
          mdi:battery
        {% elif battery_round > 0 %}
          mdi:battery-{{ battery_round }}
        {% else %}
          mdi:battery-outline
        {% endif %}

    lounge_multisensor_battery:
      friendly_name: Lounge Multisensor Battery
      unit_of_measurement: '%'
      value_template: >-
        {% set battery_level = states.zwave.aeotec_zw100_multisensor_6.attributes.battery_level | default(0) %}

        {% if battery_level %}
          {{ battery_level | round }}
        {% else %}
          {{ states('zwave.aeotec_zw100_multisensor_6') }}
        {%- endif %}
      icon_template: >-
        {% set battery_level = states.zwave.aeotec_zw100_multisensor_6.attributes.battery_level | default(0) | int %}
        {% set battery_round = (battery_level / 10) | int * 10 %}

        {% if battery_round >= 100 %}
          mdi:battery
        {% elif battery_round > 0 %}
          mdi:battery-{{ battery_round }}
        {% else %}
          mdi:battery-outline
        {% endif %}
