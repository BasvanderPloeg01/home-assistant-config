# Check if humidity is too low.
- id: check_humidity_low
  alias: Check low humidity
  trigger:
    # At noon.
    - platform: time
      hours: 12
      minutes: 00
      seconds: 00

  condition:
    # Humidity is too low.
    - condition: numeric_state
      entity_id: sensor.average_humidity
      below: 35

    # Doors are closed.
    - condition: state
      entity_id: input_boolean.doors_open
      state: 'off'

    # Windows are closed.
    - condition: state
      entity_id: input_boolean.windows_open
      state: 'off'

  action:
    - service: persistent_notification.create
      data:
        notification_id: humidity
        title: "Humidity is too low: {{ states.sensor.average_humidity.state }}%"
        message: "Take a long hot shower or install a humidifier."

# Check if humidity is too high.
- id: check_humidity_high
  alias: Check high humidity
  trigger:
    # At noon.
    - platform: time
      hours: 12
      minutes: 00
      seconds: 00

  condition:
    # Humidity is too high.
    - condition: numeric_state
      entity_id: sensor.average_humidity
      above: 50

    # Doors are closed.
    - condition: state
      entity_id: input_boolean.doors_open
      state: 'off'

    # Windows are closed.
    - condition: state
      entity_id: input_boolean.windows_open
      state: 'off'

  action:
    - service: persistent_notification.create
      data:
        notification_id: humidity
        title: "Humidity is too high: {{ states.sensor.average_humidity.state }}%"
        message: "Check the dehumidifier."
